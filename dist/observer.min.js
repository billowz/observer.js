/*!
 * observer.js v0.2.4 built in Mon, 11 Jul 2016 02:17:23 GMT
 * Copyright (c) 2016 Tao Zeng <tao.zeng.zt@gmail.com>
 * Released under the MIT license
 * support IE6+ and other browsers
 * support ES6 Proxy and Object.observe
 * https://github.com/tao-zeng/observer.js
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("utility")):"function"==typeof define&&define.amd?define(["utility"],e):"object"==typeof exports?exports.observer=e(require("utility")):t.observer=e(t.utility)}(this,function(t){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="http://localhost:8088/dist/",e(0)}([function(t,e,r){"use strict";var n=r(1),i=r(2),s=r(3),o=r(4);r(6),r(7),n.assignIf(i,n,{eq:function(t,e){return s.eq(t,e)},obj:function(t){return s.obj(t)},onproxy:function(t){return s.on(t)},unproxy:function(t){return s.un(t)},proxy:s,config:o.get()}),t.exports=i},function(e,r){e.exports=t},function(t,e,r){"use strict";function n(){}function i(t,e,r){var n=a.getOwnProp(t,f.observerKey);return n?1==arguments.length?n.hasListen():2==arguments.length?n.hasListen(e):n.hasListen(e,r):!1}function s(t,e,r){var n=a.getOwnProp(t,f.observerKey);return n||(t=c.obj(t),n=new d(t),t[f.observerKey]=n),n.on(e,r)}function o(t,e,r){var n=a.getOwnProp(t,f.observerKey);return n&&(t=2==arguments.length?n.un(e):n.un(e,r),!n.hasListen())?(t[f.observerKey]=void 0,n.destroy()):t}var c=r(3),a=(r(5),r(1)),h=a.timeoutframe,u=r(4),f=u.cfg;u.register({lazy:!0,animationFrame:!0,observerKey:"__OBSERVER__",expressionKey:"__EXPR_OBSERVER__"});var d=a.dynamicClass({constructor:function(t){if(this.isArray=a.isArray(t),!this.isArray&&!a.isObject(t))throw TypeError("can not observe object["+Object.prototype.toString.call(t)+"]");this.target=t,this.obj=t,this.listens={},this.changeRecords={},this._notify=this._notify.bind(this),this.watchPropNum=0,this._init()},_fire:function(t,e,r){var n=this,i=void 0;(!c.eq(e,r)||this.isArray&&"length"===t)&&(i=this.listens[t])&&a.each(i.slice(),function(i){i(t,e,r,n.target)})},_notify:function(){var t=this,e=this.obj;a.each(this.changeRecords,function(r,n){t._fire(n,e[n],r)}),this.request_frame=void 0,this.changeRecords={}},_addChangeRecord:function(t,e){f.lazy?t in this.changeRecords||(this.changeRecords[t]=e,this.request_frame||(this.request_frame=f.animationFrame?window.requestAnimationFrame(this._notify):h.request(this._notify))):this._fire(t,this.obj[t],e)},checkHandler:function(t){if(!a.isFunc(t))throw TypeError("Invalid Observe Handler")},hasListen:function(t,e){switch(arguments.length){case 0:return!!this.watchPropNum;case 1:return a.isFunc(t)?!a.each(this.listens,function(e){return-1!==a.lastIndexOf(e,t)}):!!listens[t];default:return this.checkHandler(e),-1!==a.lastIndexOf(listens[t],e)}},on:function(t,e){var r=void 0;return this.checkHandler(e),(r=this.listens[t])?r.push(e):(this.listens[t]=[e],this.watchPropNum++,this._watch(t)),this.target},_cleanListen:function(t){this.listens[t]=void 0,this.watchPropNum--,this._unwatch(t)},un:function(t,e){var r=this.listens[t];if(r)if(1==arguments.length)this._cleanListen(t);else{this.checkHandler(e);for(var n=r.length;n--;)if(r[n]===e){r.splice(n,1),r.length||this._cleanListen(t);break}}return this.target},destroy:function(){this.request_frame&&(f.animationFrame?window.cancelAnimationFrame(this.request_frame):h.cancel(this.request_frame),this.request_frame=void 0);var t=this.obj;return this._destroy(),this.obj=void 0,this.target=void 0,this.listens=void 0,this.changeRecords=void 0,t},_init:n,_destroy:n,_watch:n,_unwatch:n}),p=0,l=a.dynamicClass({constructor:function(t,e,r){this.id=p++,this.expr=e,this.handlers=[],this.observers=[],this.path=r||a.parseExpr(e),this.observeHandlers=this._initObserveHandlers(),this.obj=c.obj(t),this.target=this._observe(this.obj,0),this._onTargetProxy=this._onTargetProxy.bind(this),c.on(t,this._onTargetProxy)},_onTargetProxy:function(t,e){this.target=e},_observe:function(t,e){var r=this.path[e],n=void 0;return e+1<this.path.length&&(n=t[r])&&(t[r]=this._observe(c.obj(n),e+1)),s(t,r,this.observeHandlers[e])},_unobserve:function(t,e){var r=this.path[e],n=void 0,i=void 0;return i=o(t,r,this.observeHandlers[e]),e+1<this.path.length&&(n=t[r])&&(t[r]=this._unobserve(c.obj(n),e+1)),i},_initObserveHandlers:function(){return a.map(this.path,function(t,e){return this._createObserveHandler(e)},this)},_createObserveHandler:function(t){var e=this,r=(this.path.slice(0,t+1),this.path.slice(t+1)),n=this.path.length-t-1;return function(i,s,o){n&&(o?(o=c.obj(o),e._unobserve(o,t+1),o=a.get(o,r)):o=void 0,s?(s=c.obj(s),e._observe(s,t+1),s=a.get(s,r)):s=void 0,c.eq(s,o))||a.each(e.handlers.slice(),function(t){t(this.expr,s,o,this.target)},e)}},checkHandler:function(t){if(!a.isFunc(t))throw TypeError("Invalid Observe Handler")},on:function(t){return this.checkHandler(t),this.handlers.push(t),this},un:function(t){if(arguments.length){this.checkHandler(t);for(var e=this.handlers,r=e.length;r--;)if(e[r]===t){e.splice(r,1);break}}else this.handlers=[];return this},hasListen:function(t){return arguments.length?-1!=a.lastIndexOf(this.handlers,t):!!this.handlers.length},destory:function(){c.un(this.target,this._onTargetProxy);var t=this._unobserve(this.obj,0);return this.obj=void 0,this.target=void 0,this.expr=void 0,this.handlers=void 0,this.path=void 0,this.observers=void 0,this.observeHandlers=void 0,this.target=void 0,t}}),y=[],v=!1;t.exports={registerPolicy:function(t,e,r,n){return y.push({name:t,priority:e,policy:n,checker:r}),y.sort(function(t,e){return t.priority-e.priority}),this},init:function(t){if(!v){if(u.config(t),a.each(y,function(t){return t.checker(f)?(a.each(t.policy(f),function(t,e){d.prototype[e]=t}),f.policy=t.name,!1):void 0})!==!1)throw Error("not supported");v=!0}return this},on:function(t,e,r){var n=a.parseExpr(e);if(n.length>1){var i=a.getOwnProp(t,f.expressionKey),o=i?i[e]:void 0;return o||(o=new l(t,e,n),i||(i=t[f.expressionKey]={}),i[e]=o),o.on(r),o.target}return s(t,e,r)},un:function(t,e,r){var n=a.parseExpr(e);if(n.length>1){var i=a.getOwnProp(t,f.expressionKey),s=i?i[e]:void 0;return s?(2==arguments.length?s.un():e.un(r),s.hasListen()?s.target:(i[e]=void 0,s.destory())):c.proxy(t)||t}return 2==arguments.length?o(t,e):o(t,e,r)},hasListen:function(t,e,r){var n=arguments.length;switch(n){case 1:return i(t);case 2:if(a.isFunc(e))return i(t,e)}var s=a.parseExpr(e);if(s.length>1){var o=a.getOwnProp(t,f.expressionKey),c=o?o[e]:void 0;return c?2==n?!0:c.hasListen(r):!1}return i.apply(window,arguments)}}},function(t,e,r){"use strict";function n(t){return n.proxy(t)}function i(t){var e=t!==h?function(t,e){n[e]=t}:function(t,e){n[e]=s.emptyFunc};s.each(u,e),s.each(t,function(t,e){n[e]=t})}var s=(Object.prototype.toString,r(1)),o=s.hasOwnProp,c=r(4),a="proxyListenKey";c.register(a,"__PROXY_LISTENERS__");var h={eq:function(t,e){return t===e},obj:function(t){return t},proxy:function(t){return t}},u={change:function(t,e){var r=s.getOwnProp(t,c.get(a));if(r)for(var n=r.length;n--;)r[n](t,e)},on:function(t,e){if(!s.isFunc(e))throw TypeError("Invalid Proxy Event Handler["+e);var r=c.get(a),n=s.getOwnProp(t,r);n||(t[r]=n=[]),n.push(e)},un:function(t,e){var r=s.getOwnProp(t,c.get(a));if(r&&s.isFunc(e))for(var n=r.length;n-- >0;)if(r[n]===e)return r.splice(n,1),!0;return!1},clean:function(t){t[n.listenKey]&&(t[n.listenKey]=void 0)}};s.assign(n,{isEnable:function(){return policy===h},enable:function(t){i(t)},disable:function(){i(h)}}),n.disable(),s.get=function(t,e,r,i,c){for(var a=0,h=s.parseExpr(e,!0),u=h.length-1,f=void 0;!s.isNil(t)&&u>a;){if(f=h[a++],t=n.obj(t),c&&!o(t,f))return r;t=t[f]}return t=n.obj(t),f=h[a],a==u&&!s.isNil(t)&&(c?o(t,f):f in t)?t[f]:r},s.hasOwnProp=function(t,e){return o(n.obj(t),e)},t.exports=n},function(t,e,r){"use strict";var n=r(1),i=n.Configuration;t.exports=new i},function(t,e,r){"use strict";var n=r(1),i=Object.prototype.hasOwnProperty,s="hasOwnProperty,toString,toLocaleString,isPrototypeOf,propertyIsEnumerable,valueOf".split(","),o="concat,copyWithin,entries,every,fill,filter,find,findIndex,forEach,indexOf,lastIndexOf,length,map,keys,join,pop,push,reverse,reverseRight,some,shift,slice,sort,splice,toSource,unshift".split(","),c=n.dynamicClass({constBind:"__VB_CONST__",descBind:"__VB_PROXY__",classNameGenerator:0,constructor:function(t,e){this.classPool={},this.defPropMap={},this.onProxyChange=e,this.addDefProps(t),this.initConstScript()},setConstBind:function(t){this.constBind=t,this.initConstScript()},setDescBind:function(t){this.descBind=t,this.initConstScript()},addDefProps:function(t){var e=this.defPropMap;n.each(t||[],function(t){e[t]=!0}),this.defProps=n.keys(e),this.initReserveProps()},initReserveProps:function(){this.reserveProps=s.concat(n.keys(this.defPropMap)||[]),this.reserveArrayProps=this.reserveProps.concat(o),this.reservePropMap=n.reverseConvert(this.reserveProps),this.reserveArrayPropMap=n.reverseConvert(this.reserveArrayProps)},initConstScript:function(){this.constScript=["	Public [",this.descBind,"]\r\n","	Public Default Function [",this.constBind,"](desc)\r\n","		set [",this.descBind,"] = desc\r\n","		Set [",this.constBind,"] = Me\r\n","	End Function\r\n"].join("")},generateClassName:function(){return"VBClass"+this.classNameGenerator++},parseClassConstructorName:function(t){return t+"Constructor"},generateSetter:function(t){var e=this.descBind;return["	Public Property Get [",t,"]\r\n","	On Error Resume Next\r\n","		Set[",t,"] = [",e,'].get("',t,'")\r\n',"	If Err.Number <> 0 Then\r\n","		[",t,"] = [",e,'].get("',t,'")\r\n',"	End If\r\n","	On Error Goto 0\r\n","	End Property\r\n"]},generateGetter:function(t){var e=this.descBind;return["	Public Property Let [",t,"](val)\r\n","		Call [",e,'].set("',t,'",val)\r\n',"	End Property\r\n","	Public Property Set [",t,"](val)\r\n","		Call [",e,'].set("',t,'",val)\r\n',"	End Property\r\n"]},generateClass:function(t,e,r){var i=this,s=["Class ",t,"\r\n",this.constScript,"\r\n"];return n.each(e,function(t){r[t]?s.push("	Public ["+t+"]\r\n"):(s.push.apply(s,i.generateSetter(t)),s.push.apply(s,i.generateGetter(t)))}),s.push("End Class\r\n"),s.join("")},generateClassConstructor:function(t,e,r){var n=[t.length,"[",t.join(","),"]","[",r.join(","),"]"].join(""),i=this.classPool[n];if(i)return i;var s=this.generateClassName();return i=this.parseClassConstructorName(s),parseVB(this.generateClass(s,t,e)),parseVB(["Function ",i,"(desc)\r\n","	Dim o\r\n","	Set o = (New ",s,")(desc)\r\n","	Set ",i," = o\r\n","End Function"].join("")),this.classPool[n]=i,i},create:function(t,e){function r(e){n.isFunc(t[e])&&(u[e]=!0,h.push(e)),c.push(e)}var i=this,s=void 0,o=void 0,c=[],h=[],u={},f=this.descBind;return n.isArray(t)?(s=this.reserveArrayProps,o=this.reserveArrayPropMap):(s=this.reserveProps,o=this.reservePropMap),n.each(s,r),n.each(t,function(t,e){e===f||e in o||r(e)},t,!1),e||(e=this.descriptor(t),e?t=e.obj:e=new a(t,c,this)),proxy=window[this.generateClassConstructor(c,u,h)](e),n.each(h,function(e){proxy[e]=i.funcProxy(t[e],proxy)}),e.proxy=proxy,proxy},funcProxy:function(t,e){return function(){t.apply(this&&this!=window?this:e,arguments)}},eq:function(t,e){var r=this.descriptor(t),n=this.descriptor(e);return r&&(t=r.obj),n&&(e=n.obj),t===e},obj:function(t){var e=this.descriptor(t);return e?e.obj:t},proxy:function(t){var e=this.descriptor(t);return e?e.proxy:void 0},isProxy:function(t){return i.call(t,this.constBind)},descriptor:function(t){var e=this.descBind;return i.call(t,e)?t[e]:void 0},destroy:function(t){var e=this.descriptor(t);return e&&(t=e.obj,this.onProxyChange(t,void 0)),t}}),a=n.dynamicClass({constructor:function(t,e,r){this.classGenerator=r,this.obj=t,this.defines=n.reverseConvert(e,function(){return!1}),t[r.descBind]=this,this.accessorNR=0},isAccessor:function(t){return t&&(t.get||t.set)},hasAccessor:function(){return!!this.accessorNR},defineProperty:function(t,e){var r=this.defines,i=this.obj;return t in r||(t in i?n.isFunc(i[t])&&console.warn("defineProperty not support function ["+t+"]"):i[t]=void 0,this.classGenerator.create(this.obj,this)),this.isAccessor(e)?(r[t]=e,this.accessorNR++,e.get&&(i[t]=e.get())):(r[t]&&(r[t]=!1,this.accessorNR--),i[t]=e.value),this.proxy},getPropertyDefine:function(t){return this.defines[t]||void 0},get:function(t){var e=this.defines[t];return e&&e.get?e.get.call(this.proxy):this.obj[t]},set:function(t,e){var r=this.defines[t];r&&r.set&&r.set.call(this.proxy,e),this.obj[t]=e}}),h=void 0;c.isSupport=function(){if(void 0!==h)return h;if(h=!1,window.VBArray)try{window.execScript(["Function parseVB(code)","	ExecuteGlobal(code)","End Function"].join("\n"),"VBScript"),h=!0}catch(t){console.error(t.message,t)}return h},t.exports=c},function(t,e,r){"use strict";var n=r(2),i=r(3),s=r(1),o=r(4);o.register({es6Proxy:!0,es6SourceKey:"__ES6_PROXY_SOURCE__",es6ProxyKey:"__ES6_PROXY__"}),n.registerPolicy("ES6Proxy",1,function(t){return window.Proxy&&t.es6Proxy!==!1},function(t){var e=t.es6SourceKey,r=t.es6ProxyKey;return i.enable({obj:function(t){return t?s.getOwnProp(t,e)||t:t},eq:function(t,e){return t===e||t&&e&&i.obj(t)===i.obj(e)},proxy:function(t){return t?s.getOwnProp(t,r):void 0}}),{_init:function(){this.obj=i.obj(this.target),this.es6proxy=!1},_destroy:function(){this.es6proxy=!1,this.obj[r]=void 0,this.obj[e]=void 0,i.change(this.obj,void 0)},_watch:function(t){if(!this.es6proxy){var n=this.isArray?this._arrayProxy():this._objectProxy(),s=this.obj;this.target=n,s[r]=n,s[e]=s,i.change(s,n),this.es6proxy=!0}},_unwatch:function(t){},_arrayProxy:function(){var t=this,e=this.target.length;return new Proxy(this.obj,{set:function(r,n,i){if(t.listens[n]){var s=void 0;"length"===n?(s=e,e=i):s=r[n],r[n]=i,i!==s&&t._addChangeRecord(n,s)}else r[n]=i;return!0}})},_objectProxy:function(){var t=this;return new Proxy(this.obj,{set:function(e,r,n){if(t.listens[r]){var i=e[r];e[r]=n,n!==i&&t._addChangeRecord(r,i)}else e[r]=n;return!0}})}}})},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},i=r(2),s=r(3),o=r(5),c=r(1),a=["push","pop","shift","unshift","sort","reverse","splice"],h={_init:function(){this.watchers={}},_destroy:function(){for(var t in this.watchers)this.watchers[t]&&this._unwatch(t);this.watchers=void 0},_hockArrayLength:function(t){var e=this;this.obj[t]=function(){var r=this.length;Array.prototype[t].apply(this,arguments),e.obj.length!=r&&e._addChangeRecord("length",r)}},_watch:function(t){var e=this;this.watchers[t]||(this.isArray&&"length"===t?c.each(a,function(t){e._hockArrayLength(t)}):this._defineProperty(t,this.obj[t]),this.watchers[t]=!0)},_unwatch:function(t){var e=this;this.watchers[t]&&(this.isArray&&"length"===t?c.each(a,function(t){delete e.obj[t]}):this._undefineProperty(t,this.obj[t]),this.watchers[t]=!1)}};i.registerPolicy("ES5DefineProperty",10,function(t){if(Object.defineProperty)try{var e=function(){var t=void 0,e={};return Object.defineProperty(e,"sentinel",{get:function(){return t},set:function(e){t=e}}),e.sentinel=1,{v:e.sentinel===t}}();if("object"===("undefined"==typeof e?"undefined":n(e)))return e.v}catch(r){}return!1},function(t){return s.disable(),c.assignIf({_defineProperty:function(t,e){var r=this;Object.defineProperty(this.target,t,{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){var i=e;e=n,r._addChangeRecord(t,i)}})},_undefineProperty:function(t,e){Object.defineProperty(this.target,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}},h)}),i.registerPolicy("DefineGetterAndSetter",20,function(t){return"__defineGetter__"in{}},function(t){return s.disable(),c.assignIf({_defineProperty:function(t,e){var r=this;this.target.__defineGetter__(t,function(){return e}),this.target.__defineSetter__(t,function(n){var i=e;e=n,r._addChangeRecord(t,i)})},_undefineProperty:function(t,e){this.target.__defineGetter__(t,function(){return e}),this.target.__defineSetter__(t,function(t){e=t})}},h)}),i.registerPolicy("VBScriptProxy",30,function(t){return o.isSupport()},function(t){var e=h._init,r=i.vbfactory=new o([s.listenKey,t.observerKey,t.expressionKey],s.change);return s.enable({obj:function(t){return t?r.obj(t):t},eq:function(t,e){return t===e||t&&e&&r.obj(t)===r.obj(e)},proxy:function(t){return t?r.proxy(t):void 0}}),c.assignIf({_init:function(){e.call(this),this.obj=r.obj(this.target)},_defineProperty:function(t,e){var n=this,i=this.obj,s=r.descriptor(i);s||(s=r.descriptor(r.create(i))),this.target=s.defineProperty(t,{set:function(e){var r=n.obj[t];n.obj[t]=e,n._addChangeRecord(t,r)}})},_undefineProperty:function(t,e){var n=this.obj,i=r.descriptor(n);i&&(this.target=i.defineProperty(t,{value:e}),i.hasAccessor()||(this.target=r.destroy(n)))}},h)})}])});