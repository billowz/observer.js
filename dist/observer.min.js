!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("_")):"function"==typeof define&&define.amd?define(["_"],e):"object"==typeof exports?exports.observer=e(require("_")):t.observer=e(t._)}(this,function(t){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";n(1),t.exports=n(7)},function(t,e,n){"use strict";n(2),n(4),n(5),n(6)},function(t,e,n){"use strict";function i(t,e){function n(t){return this&&this.constructor===n?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,void(t&&r.call(this,t))):new n(t)}return e||(t.size=g),t.constructor=n,n.prototype=t,n}function r(t){this.add?t.forEach(this.add,this):t.forEach(function(t){this.set(t[0],t[1])},this)}function s(t){return this.has(t)&&(this._keys.splice(O,1),this._values.splice(O,1),this._itp.forEach(function(t){O<t[0]&&t[0]--})),O>-1}function o(t){return this.has(t)?this._values[O]:void 0}function u(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!=e||0===e)for(O=t.length;O--&&!is(t[O],e););else O=w.indexOf(t,e);return O>-1}function a(t){return u.call(this,this._values,t)}function c(t){return u.call(this,this._keys,t)}function h(t,e){return this.has(t)?this._values[O]=e:this._values[this._keys.push(t)-1]=e,this}function f(t){return this.has(t)||this._values.push(t),this}function p(){(this._keys||0).length=this._values.length=0}function d(){return v(this._itp,this._keys)}function l(){return v(this._itp,this._values)}function _(){return v(this._itp,this._keys,this._values)}function y(){return v(this._itp,this._values,this._values)}function v(t,e,n){var i=[0],r=!1;return t.push(i),{next:function(){var s,o=i[0];return!r&&o<e.length?(s=n?[e[o],n[o]]:e[o],i[0]++):(r=!0,t.splice(w.indexOf(t,i),1)),{done:r,value:s}}}}function g(){return this._values.length}function b(t,e){for(var n=this.entries();;){var i=n.next();if(i.done)break;t.call(e,i.value[1],i.value[0],this)}}var w=n(3),O=void 0,j={};"undefined"==typeof WeakMap&&(j.WeakMap=i({"delete":s,clear:p,get:o,has:c,set:h},!0)),"undefined"!=typeof Map&&w.isFunction((new Map).values)&&(new Map).values().next||(j.Map=i({"delete":s,has:c,get:o,set:h,keys:d,values:l,entries:_,forEach:b,clear:p})),"undefined"!=typeof Set&&w.isFunction((new Set).values)&&(new Set).values().next||(j.Set=i({has:a,add:f,"delete":s,clear:p,keys:l,values:l,entries:y,forEach:b})),"undefined"==typeof WeakSet&&(j.WeakSet=i({"delete":s,add:f,clear:p,has:a},!0)),w.assign(window,j),t.exports=j},function(e,n){e.exports=t},function(t,e,n){"use strict";var i=n(3),r={},s={};Function.prototype.bind||(s.bind=function(t){if(arguments.length<2&&void 0===t)return this;var e=this,n=i.slice(arguments,1);return function(){return e.apply(t,n.push.apply(n,arguments))}}),i.assign(Function.prototype,s),t.exports=i.assign(r,s)},function(t,e){"use strict";function n(t){try{var e=function(){var e=void 0;return Object.defineProperty(t,"sentinel",{get:function(){return e},set:function(t){e=t}}),t.sentinel=1,{v:t.sentinel===e}}();if("object"==typeof e)return e.v}catch(n){return!1}}var i=Object.defineProperty&&n({}),r=Object.defineProperty&&n(document.createElement("div"));if(!i){var s=function(t,e,n){n?Object[t]=function(t){_.isElement(t)?n.apply(Object,arguments):e.apply(Object,arguments)}:Object[t]=e};s("defineProperty",function(t,e,n){"value"in n?t[e]=n.value:("get"in n||"set"in n)&&(n.get&&Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__.call(o,e,n.get),n.set&&Object.prototype.__defineSetter__&&Object.prototype.__defineSetter__.call(o,e,n.set))},r?Object.defineProperty:null),s("defineProperties",function(){},r?Object.defineProperties:null),s("getOwnPropertyDescriptor",function(t,e){console.log("getOwnPropertyDescriptor",arguments)},r?Object.getOwnPropertyDescriptor:null)}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}window.VBArray&&!function(){var t=function(){return"VBClass"+h++},e=function(t){return t+"Factory"},r=function(t,e){return["	Public Property Get ["+t+"]","	On Error Resume Next","		Set["+t+"] = "+e,"	If Err.Number <> 0 Then","		["+t+"] = "+e,"	End If","	On Error Goto 0","	End Property"].join("\r\n")},s=function(t,e){return["	Public Property Let ["+t+"](val)","		"+e,"	End Property","	Public Property Set ["+t+"](val)","		"+e,"	End Property"].join("\r\n")},o=function(t,e,n){var i=[];return i.push("Class "+t,f),_.each(e,function(t){i.push("	Public [' + name + ']")}),_.each(n,function(t){i.push(s(t,'Call [__proxy__].set(Me, "'+t+'", val)'),r(t,'[__proxy__].get(Me, "'+t+'")'))}),i.push("End Class"),i.join("\r\n")},u=function(n,i){var r=void 0,s=void 0,u="["+n.join(",")+"]&&["+i.join(",")+"]";return r=c[u],r?e(r):(r=t(),s=e(r),window.parseVB(o(r,n,i)),window.parseVB(["Function "+s+"(desc)","	Dim o","	Set o = (New "+r+")(desc)","	Set "+s+" = o","End Function"].join("\r\n")),c[u]=r,s)},a=function(t){var e=d.get(t);if(null==e){var n=new p(t),i=_.keys(t),r=[],s=u(r,i);e=window[s](n)}return e};n(2);var c={},h=0;window.execScript(["Function parseVB(code)","	ExecuteGlobal(code)","End Function"].join("\n"),"VBScript");var f=["	Private [__proxy__]","	Public Default Function [__const__](desc)","		set [__proxy__] = desc","		Set [__const__] = Me","	End Function"].join("\r\n"),p=(r("__proxy__","[__proxy__]"),function(){function t(e){i(this,t),this.object=e}return t.prototype.defineProperty=function(t,e){this.defines[t]=e},t.prototype.get=function(t,e){console.log("--->get property "+e)},t.prototype.set=function(t,e,n){this.object[e]=n,console.log("--->set property "+e+"="+n+" "+this.object.a)},t}()),d=new Map;window.genVBProxy=a,window.VBClassPool=c,window.VBProxyLoop=d}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){t._binded!==!0&&(f.set(t.target,t),t._binded=!0)}function s(t){t._binded===!0&&(f.get(t.target)===t&&f["delete"](t.target),t._binded=!1)}function o(t){return f.get(t)}var u=n(3),a="webkit moz ms o".split(" "),c=function(t,e){var n=window[t];return n||(t=u.capitalize(t),t=u.find(a,function(e){return window[e+t]}),n=t?window[t]:null),n||e},h=c("requestAnimationFrame",function(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-p)),i=setTimeout(function(){t(e+n)},n);return p=e+n,i}).bind(window),f=new Map,p=0,d={useES7Observe:!0},l=function(){function t(e,n,r){i(this,t),this.target=e,this.attr=n,this.onChange=r,this.define=Object.getOwnPropertyDescriptor(e,n)||{enumerable:!0,configurable:!0,writable:!0,value:e[n]}}return t.prototype.getValue=function(){return this.define.get?this.define.get.call(this.target):this.define.value},t.prototype.setValue=function(t){var e=this.getValue();t!==e&&(this.define.set?this.define.set.call(this.target,t):this.define.value=t,this.onChange(this.attr,e))},t.prototype.bind=function(){return this._binded||(Object.defineProperty(this.target,this.attr,{enumerable:!0,configurable:!0,get:this.getValue.bind(this),set:this.setValue.bind(this)}),this._binded=!0),this},t.prototype.unbind=function(){return this._binded&&(Object.defineProperty(this.target,this.attr,this.define),this._binded=!1),this},t.prototype.isBinded=function(){return!!this._binded},t}(),_=function(){function t(e){if(i(this,t),!u.isArray(e)&&!u.isObject(e))throw TypeError("can not observe object["+typeof e+"]");this.target=e,this.watchers={},this.listens={},this._onObserveChanged=this._onObserveChanged.bind(this),this._notify=this._notify.bind(this),this.changeRecords={},r(this)}return t.prototype._notify=function(){var t=this;u.map(this.changeRecords,function(e,n){var i=t.listens[n];u.each(i,function(i){i(n,t.target[n],e,t.target)})}),this.changeRecords={}},t.prototype._addChangeRecord=function(t,e){t in this.changeRecords||(this.changeRecords[t]=e,this.__request_frame||(this.__request_frame=h(this._notify)))},t.prototype._addListen=function(t,e){var n=this.listens[t];n||(n=this.listens[t]=[]),u.each(e,function(t){u.include(n,t)||n.push(t)}),n.length&&this._watch(t)},t.prototype._removeListen=function(t,e){var n=this.listens[t];n&&(e.length&&u.remove(n,function(t){return u.include(e,t)}),e.length&&n.length||(delete this.listens[t],this._unwatch(t)))},t.prototype._onStateChanged=function(t,e){t in this.listens&&this._addChangeRecord(t,e)},t.prototype._onObserveChanged=function(t){var e=this;u.each(t,function(t){e._onStateChanged(t.name,t.oldValue)})},t.prototype._watch=function(t){Object.observe&&d.useES7Observe?this._es7observe||(Object.observe(this.target,this._onObserveChanged),this._es7observe=!0):this.watchers[t]||(this.watchers[t]=new l(this.target,t,this._onStateChanged.bind(this)).bind())},t.prototype._unwatch=function(t){Object.observe&&d.useES7Observe?this._es7observe&&this.hasListen()&&(Object.unobserve(this.target,this._onObserveChanged),_es7observe=!1):this.watchers[t]&&(this.watchers[t].unbind(),delete this.watchers[t])},t.prototype._parseBindArg=function(t,e){return 1==arguments.length?(e=t,t=u.keys(this.target)):t=u.isArray(t)?u.map(t,function(t){return t+""}):[t+""],u.isArray(e)||(e=[e]),e=u.filter(e,function(t){return u.isFunction(t)}),{attrs:t,handlers:e}},t.prototype.hasListen=function(){return u.findKey(this.listens)},t.prototype.on=function(){var t=this,e=this._parseBindArg.apply(this,arguments);e.attrs.length&&e.handlers.length&&u.each(e.attrs,function(n){t._addListen(n,e.handlers)})},t.prototype.un=function(){var t=this,e=this._parseBindArg.apply(this,arguments);return e.attrs.length?(u.each(e.attrs,function(n){t._removeListen(n,e.handlers)}),this):void 0},t.prototype.destory=function(){Object.observe&&d.useES7Observe?(Object.unobserve(this.target,this._onObserveChanged),this.listens={}):(u.each(this.watchers,function(t){t.unbind()}),this.watchers={}),s(this)},t}();t.exports={on:function(t){var e=o(t);e||(e=new _(t)),e.on.apply(e,u.slice(arguments,1)),e.hasListen()||e.destory()},un:function(t){var e=o(t);e&&(e.un.apply(e,u.slice(arguments,1)),e.hasListen()||e.destory())},getObserver:function(t){return o(t)},cfg:d}}])});