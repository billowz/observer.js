!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("_")):"function"==typeof define&&define.amd?define(["_"],e):"object"==typeof exports?exports.observer=e(require("_")):t.observer=e(t._)}(this,function(t){return function(t){function e(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";n(1),t.exports=n(3)},function(t,e,n){(function(t){"use strict";var i=n(2),s=void 0;!function(t){function e(t,e){function i(t){return this&&this.constructor===i?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,void(t&&n.call(this,t))):new i(t)}return e||(t.size=b),t.constructor=i,i.prototype=t,i}function n(t){this.add?t.forEach(this.add,this):t.forEach(function(t){this.set(t[0],t[1])},this)}function r(t){return this.has(t)&&(this._keys.splice(s,1),this._values.splice(s,1),this._itp.forEach(function(t){s<t[0]&&t[0]--})),s>-1}function o(t){return this.has(t)?this._values[s]:void 0}function h(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!=e||0===e)for(s=t.length;s--&&!is(t[s],e););else s=t.indexOf(e);return s>-1}function a(t){return h.call(this,this._values,t)}function u(t){return h.call(this,this._keys,t)}function c(t,e){return this.has(t)?this._values[s]=e:this._values[this._keys.push(t)-1]=e,this}function f(t){return this.has(t)||this._values.push(t),this}function d(){(this._keys||0).length=this._values.length=0}function l(){return g(this._itp,this._keys)}function p(){return g(this._itp,this._values)}function v(){return g(this._itp,this._keys,this._values)}function _(){return g(this._itp,this._values,this._values)}function g(t,e,n){var i=[0],s=!1;return t.push(i),{next:function(){var r,o=i[0];return!s&&o<e.length?(r=n?[e[o],n[o]]:e[o],i[0]++):(s=!0,t.splice(t.indexOf(i),1)),{done:s,value:r}}}}function b(){return this._values.length}function y(t,e){for(var n=this.entries();;){var i=n.next();if(i.done)break;t.call(e,i.value[1],i.value[0],this)}}"undefined"==typeof WeakMap&&(t.WeakMap=e({"delete":r,clear:d,get:o,has:u,set:c},!0)),"undefined"!=typeof Map&&i.isFunction((new Map).values)&&(new Map).values().next||(t.Map=e({"delete":r,has:u,get:o,set:c,keys:l,values:p,entries:v,forEach:y,clear:d})),"undefined"!=typeof Set&&i.isFunction((new Set).values)&&(new Set).values().next||(t.Set=e({has:a,add:f,"delete":r,clear:d,keys:p,values:p,entries:_,forEach:y})),"undefined"==typeof WeakSet&&(t.WeakSet=e({"delete":r,add:f,clear:d,has:a},!0))}("undefined"!=typeof e&&"undefined"!=typeof t?t:window)}).call(e,function(){return this}())},function(e,n){e.exports=t},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t){t._binded!==!0&&(f.set(t.target,t),t._binded=!0)}function r(t){t._binded===!0&&(f.get(t.target)===t&&f["delete"](t.target),t._binded=!1)}function o(t){return f.get(t)}var h=n(2),a="webkit moz ms o".split(" "),u=function(t,e){var n=window[t];return n||(t=h.capitalize(t),t=h.find(a,function(e){return window[e+t]}),n=t?window[t]:null),n||e},c=u("requestAnimationFrame",function(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-d)),i=setTimeout(function(){t(e+n)},n);return d=e+n,i}).bind(window),f=new Map,d=0,l={useES7Observe:!0},p=function(){function t(e,n,s){i(this,t),this.target=e,this.attr=n,this.onChange=s,this.define=Object.getOwnPropertyDescriptor(e,n)||{enumerable:!0,configurable:!0,writable:!0,value:e[n]}}return t.prototype.getValue=function(){return this.define.get?this.define.get.call(this.target):this.define.value},t.prototype.setValue=function(t){var e=this.getValue();t!==e&&(this.define.set?this.define.set.call(this.target,t):this.define.value=t,this.onChange(this.attr,e))},t.prototype.bind=function(){return this._binded||(Object.defineProperty(this.target,this.attr,{enumerable:!0,configurable:!0,get:this.getValue.bind(this),set:this.setValue.bind(this)}),this._binded=!0),this},t.prototype.unbind=function(){return this._binded&&(Object.defineProperty(this.target,this.attr,this.define),this._binded=!1),this},t.prototype.isBinded=function(){return!!this._binded},t}(),v=function(){function t(e){if(i(this,t),!h.isArray(e)&&!h.isObject(e))throw TypeError("can not observe object["+typeof e+"]");this.target=e,this.watchers={},this.listens={},this._onObserveChanged=this._onObserveChanged.bind(this),this._notify=this._notify.bind(this),this.changeRecords={},s(this)}return t.prototype._notify=function(){var t=this;h.map(this.changeRecords,function(e,n){var i=t.listens[n];h.each(i,function(i){i(n,t.target[n],e,t.target)})}),this.changeRecords={}},t.prototype._addChangeRecord=function(t,e){t in this.changeRecords||(this.changeRecords[t]=e,this.__request_frame||(this.__request_frame=c(this._notify)))},t.prototype._addListen=function(t,e){var n=this.listens[t];n||(n=this.listens[t]=[]),h.each(e,function(t){h.include(n,t)||n.push(t)}),n.length&&this._watch(t)},t.prototype._removeListen=function(t,e){var n=this.listens[t];n&&(e.length&&h.remove(n,function(t){return h.include(e,t)}),e.length&&n.length||(delete this.listens[t],this._unwatch(t)))},t.prototype._onStateChanged=function(t,e){t in this.listens&&this._addChangeRecord(t,e)},t.prototype._onObserveChanged=function(t){var e=this;h.each(t,function(t){e._onStateChanged(t.name,t.oldValue)})},t.prototype._watch=function(t){Object.observe&&l.useES7Observe?this._es7observe||(Object.observe(this.target,this._onObserveChanged),this._es7observe=!0):this.watchers[t]||(this.watchers[t]=new p(this.target,t,this._onStateChanged.bind(this)).bind())},t.prototype._unwatch=function(t){Object.observe&&l.useES7Observe?this._es7observe&&this.hasListen()&&(Object.unobserve(this.target,this._onObserveChanged),_es7observe=!1):this.watchers[t]&&(this.watchers[t].unbind(),delete this.watchers[t])},t.prototype._parseBindArg=function(t,e){return 1==arguments.length?(e=t,t=h.keys(this.target)):t=h.isArray(t)?h.map(t,function(t){return t+""}):[t+""],h.isArray(e)||(e=[e]),e=h.filter(e,function(t){return h.isFunction(t)}),{attrs:t,handlers:e}},t.prototype.hasListen=function(){return h.findKey(this.listens)},t.prototype.on=function(){var t=this,e=this._parseBindArg.apply(this,arguments);e.attrs.length&&e.handlers.length&&h.each(e.attrs,function(n){t._addListen(n,e.handlers)})},t.prototype.un=function(){var t=this,e=this._parseBindArg.apply(this,arguments);return e.attrs.length?(h.each(e.attrs,function(n){t._removeListen(n,e.handlers)}),this):void 0},t.prototype.destory=function(){Object.observe&&l.useES7Observe?(Object.unobserve(this.target,this._onObserveChanged),this.listens={}):(h.each(this.watchers,function(t){t.unbind()}),this.watchers={}),r(this)},t}();t.exports={on:function(t){var e=o(t);e||(e=new v(t)),e.on.apply(e,h.slice(arguments,1)),e.hasListen()||e.destory()},un:function(t){var e=o(t);e&&(e.un.apply(e,h.slice(arguments,1)),e.hasListen()||e.destory())},getObserver:function(t){return o(t)},cfg:l}}])});