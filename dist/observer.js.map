{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 8d9916a449f3c9fe4739","webpack:///C:/Users/cmp/git/observer.js/src/observer.js","webpack:///external {\"root\":\"_\",\"commonjs\":\"_\",\"commonjs2\":\"_\",\"amd\":\"_\"}"],"names":[],"mappings":"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","file":"observer.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"_\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"_\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"observer\"] = factory(require(\"_\"));\n\telse\n\t\troot[\"observer\"] = factory(root[\"_\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 8d9916a449f3c9fe4739\n **/","const _ = require('lodash'),\n  ARRAY_METHODS = ['push', 'pop', 'shift', 'unshift', 'sort', 'reverse', 'splice'],\n  prefixes = 'webkit moz ms o'.split(' '),\n  getFrame = function getFrame(prop, defaultVal) {\n    let ret = window[prop];\n    if (!ret) {\n      prop = _.capitalize(prop);\n      prop = _.find(prefixes, prefix => {\n        return window[prefix + prop];\n      })\n      ret = prop ? window[prop] : null;\n    }\n    return ret || defaultVal;\n  },\n  requestFrame = getFrame('requestAnimationFrame', function requestAnimationFrame(callback) {\n    let currTime = new Date().getTime(),\n      timeToCall = Math.max(0, 16 - (currTime - lastTime)),\n      reqId = setTimeout(function() {\n        callback(currTime + timeToCall);\n      }, timeToCall);\n    lastTime = currTime + timeToCall;\n    return reqId;\n  }).bind(window);\n\nlet _observers = new Map(),\n  lastTime = 0,\n  cfg = {\n    useES7Observe: true\n  };\n\nfunction bindObserver(observer) {\n  if (observer._binded !== true) {\n    _observers.set(observer.target, observer);\n    observer._binded = true;\n  }\n}\n\nfunction unbindObserver(observer) {\n  if (observer._binded === true) {\n    if (_observers.get(observer.target) === observer) {\n      _observers.delete(observer.target);\n    }\n    observer._binded = false;\n  }\n}\n\nfunction getBindObserver(target) {\n  return _observers.get(target);\n}\n\nclass State {\n  constructor(target, attr, onChange) {\n    this.target = target;\n    this.attr = attr;\n    this.onChange = onChange;\n    this.define = Object.getOwnPropertyDescriptor(target, attr) || {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value: target[attr]\n    };\n  }\n\n\n  getValue() {\n    if (this.define.get) {\n      return this.define.get.call(this.target);\n    } else {\n      return this.define.value;\n    }\n  }\n\n  setValue(value) {\n    let oldValue = this.getValue();\n    if (value !== oldValue) {\n      if (this.define.set) {\n        this.define.set.call(this.target, value);\n      } else {\n        this.define.value = value;\n      }\n      this.onChange(this.attr, oldValue);\n    }\n  }\n\n  bind() {\n    if (!this._binded) {\n      let object = Object.defineProperty(this.target, this.attr, {\n        enumerable: true,\n        configurable: true,\n        get: this.getValue.bind(this),\n        set: this.setValue.bind(this)\n      });\n      this.target = object;\n      this._binded = true;\n    }\n    return this;\n  }\n\n  unbind() {\n    if (this._binded) {\n      this.target = Object.defineProperty(this.target, this.attr, this.define);\n      this._binded = false;\n    }\n    return this;\n  }\n\n  isBinded() {\n    return !!this._binded;\n  }\n}\n\nclass Observer {\n  constructor(target) {\n    if (!_.isArray(target) && !_.isObject(target)) {\n      throw TypeError('can not observe object[' + (typeof target) + ']');\n    }\n    this.target = target;\n    this.watchers = {};\n    this.listens = {};\n    this._onObserveChanged = this._onObserveChanged.bind(this);\n    this._notify = this._notify.bind(this);\n    this.changeRecords = {};\n    bindObserver(this);\n  }\n\n  _notify() {\n    _.map(this.changeRecords, (oldVal, attr) => {\n      let handlers = this.listens[attr];\n      _.each(handlers, h => {\n        h(attr, this.target[attr], oldVal, this.target);\n      })\n    });\n    this.__request_frame = null;\n    this.changeRecords = {};\n  }\n\n  _addChangeRecord(attr, oldVal) {\n    if (!(attr in this.changeRecords)) {\n      this.changeRecords[attr] = oldVal;\n      if (!this.__request_frame) {\n        this.__request_frame = requestFrame(this._notify);\n      }\n    }\n  }\n\n  _addListen(attr, handlers) {\n    let attrHandlers = this.listens[attr];\n    if (!attrHandlers) {\n      attrHandlers = this.listens[attr] = [];\n    }\n    _.each(handlers, (h) => {\n      if (!_.include(attrHandlers, h)) {\n        attrHandlers.push(h);\n      }\n    });\n    if (attrHandlers.length) {\n      this._watch(attr);\n    }\n  }\n\n  _removeListen(attr, handlers) {\n    let attrHandlers = this.listens[attr];\n    if (attrHandlers) {\n      if (handlers.length) {\n        _.remove(attrHandlers, (h) => {\n          return _.include(handlers, h);\n        });\n      }\n      if (!handlers.length || !attrHandlers.length) {\n        delete this.listens[attr];\n        this._unwatch(attr);\n      }\n    }\n  }\n\n  _onStateChanged(attr, oldVal) {\n    if (attr in this.listens) {\n      console.log('changed:', attr, ' ', oldVal)\n      this._addChangeRecord(attr, oldVal);\n    }\n  }\n\n  _onObserveChanged(changes) {\n    _.each(changes, change => {\n      this._onStateChanged(change.name, change.oldValue);\n    });\n  }\n\n  _watch(attr) {\n    if (Object.observe && cfg.useES7Observe) {\n      if (!this._es7observe) {\n        Object.observe(this.target, this._onObserveChanged);\n        this._es7observe = true;\n      }\n    } else if (!this.watchers[attr]) {\n      this.watchers[attr] = new State(this.target, attr, this._onStateChanged.bind(this)).bind();\n      this.target = this.watchers[attr].target;\n    }\n  }\n\n  _unwatch(attr) {\n    if (Object.observe && cfg.useES7Observe) {\n      if (this._es7observe && this.hasListen()) {\n        Object.unobserve(this.target, this._onObserveChanged);\n        _es7observe = false;\n      }\n    } else if (this.watchers[attr]) {\n      this.watchers[attr].unbind();\n      this.target = this.watchers[attr].target;\n      delete this.watchers[attr];\n    }\n  }\n\n  _parseBindArg(attrs, handlers) {\n    if (arguments.length == 1) {\n      handlers = attrs;\n      attrs = _.keys(this.target);\n    } else if (!_.isArray(attrs)) {\n      attrs = [attrs + ''];\n    } else {\n      attrs = _.map(attrs, attr => {\n        return attr + '';\n      });\n    }\n    if (!_.isArray(handlers)) {\n      handlers = [handlers];\n    }\n    handlers = _.filter(handlers, (h) => {\n      return _.isFunction(h);\n    });\n    return {\n      attrs: attrs,\n      handlers: handlers\n    };\n  }\n\n  hasListen() {\n    return _.findKey(this.listens);\n  }\n\n  on() {\n    let arg = this._parseBindArg.apply(this, arguments);\n    if (arg.attrs.length && arg.handlers.length) {\n      _.each(arg.attrs, attr => {\n        if (this.target.__proxy__) {\n          let obj = this.target.__proxy__.object;\n          if (!(attr in obj)) {\n            obj[attr] = undefined;\n          }\n        }\n        this._addListen(attr, arg.handlers);\n      });\n    }\n    return this.target;\n  }\n\n  un() {\n    let arg = this._parseBindArg.apply(this, arguments);\n    if (arg.attrs.length) {\n      _.each(arg.attrs, attr => {\n        this._removeListen(attr, arg.handlers);\n      });\n    }\n    return this.target;\n  }\n\n\n  destory() {\n    if (Object.observe && cfg.useES7Observe) {\n      Object.unobserve(this.target, this._onObserveChanged);\n      this.listens = {};\n    } else {\n      _.each(this.watchers, (state) => {\n        state.unbind();\n      });\n      this.watchers = {};\n    }\n    unbindObserver(this);\n  }\n}\nmodule.exports = {\n  on(obj) {\n    // VB Proxy\n    if (obj.__proxy__) {\n      obj = obj.__proxy__.object;\n    }\n\n    let observer = getBindObserver(obj);\n    if (!observer) {\n      observer = new Observer(obj);\n    }\n    let ret = observer.on.apply(observer, _.slice(arguments, 1));\n    if (!observer.hasListen()) {\n      observer.destory();\n    }\n    return ret;\n  },\n\n  un(obj) {\n    let observer = getBindObserver(obj);\n    if (observer) {\n      let ret = observer.un.apply(observer, _.slice(arguments, 1));\n      if (!observer.hasListen()) {\n        observer.destory();\n      }\n      return ret;\n    }\n  },\n\n  _getObserver(obj) {\n    return getBindObserver(obj);\n  },\n\n  cfg: cfg,\n\n  support: !!Object.observe || Object.defineProperty && (function() {\n      try {\n        let val;\n        Object.defineProperty(object, 'sentinel', {\n          get() {\n            return val;\n          },\n          set(value) {\n            val = value;\n          }\n        });\n        object.sentinel = 1;\n        return object.sentinel === val;\n      } catch (exception) {\n        return false;\n      }\n    })() || window.supportDefinePropertyOnObject\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/Users/cmp/git/observer.js/src/observer.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"_\",\"commonjs\":\"_\",\"commonjs2\":\"_\",\"amd\":\"_\"}\n ** module id = 1\n ** module chunks = 0\n **/"],"sourceRoot":""}