{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f41e1e43de6d53f3b7a3","webpack:///C:/Users/cmp/git/observer.js/src/index.js","webpack:///external {\"root\":\"_\",\"commonjs\":\"_\",\"commonjs2\":\"_\",\"amd\":\"_\"}","webpack:///C:/Users/cmp/git/observer.js/src/observer.js","webpack:///C:/Users/cmp/git/observer.js/src/util.js","webpack:///C:/Users/cmp/git/observer.js/src/watcher.js"],"names":[],"mappings":"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","file":"observer.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"_\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"_\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"observer\"] = factory(require(\"_\"));\n\telse\n\t\troot[\"observer\"] = factory(root[\"_\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap f41e1e43de6d53f3b7a3\n **/","\nmodule.exports = require('lodash').assign({}, require('./observer'), require('./watcher'));\n\n\n\n/** WEBPACK FOOTER **\n ** C:/Users/cmp/git/observer.js/src/index.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"_\",\"commonjs\":\"_\",\"commonjs2\":\"_\",\"amd\":\"_\"}\n ** module id = 1\n ** module chunks = 0\n **/","/**\n * 监控对象属性变化\n * 高版本浏览器(Chrome 36+, Opera 23+)基于 Object.observe(ES7)实现\n * 基于浏览器使用 Object.defineProperty实现\n * IE 6,7,8使用VBScript实现Object.defineProperty\n */\nconst _ = require('./util'),\n  ARRAY_METHODS = ['push', 'pop', 'shift', 'unshift', 'sort', 'reverse', 'splice'],\n  requestTimeoutFrame = function requestTimeoutFrame(callback) {\n    let currTime = new Date().getTime(),\n      timeToCall = Math.max(0, cfg.timeoutFrameInterval - (currTime - lastTime)),\n      reqId = setTimeout(function() {\n        callback(currTime + timeToCall);\n      }, timeToCall);\n    lastTime = currTime + timeToCall;\n    return reqId;\n  },\n  requestFrame = function requestFrame(callback) {\n    if (window.requestAnimationFrame && cfg.useAnimationFrame) {\n      return window.requestAnimationFrame(callback);\n    } else {\n      return requestTimeoutFrame(callback);\n    }\n  };\n\nlet _observers = new Map(),\n  lastTime = 0,\n  cfg = {\n    useES7Observe: true,\n    useAnimationFrame: false,\n    timeoutFrameInterval: 16\n  };\n\nfunction bindObserver(observer) {\n  if (observer._binded !== true) {\n    _observers.set(observer.target, observer);\n    observer._binded = true;\n  }\n}\n\nfunction unbindObserver(observer) {\n  if (observer._binded === true) {\n    if (_observers.get(observer.target) === observer) {\n      _observers.delete(observer.target);\n    }\n    observer._binded = false;\n  }\n}\n\nfunction getBindObserver(target) {\n  return _observers.get(target);\n}\n\n\nclass Observer {\n  constructor(target) {\n    if (!_.isArray(target) && !_.isObject(target)) {\n      throw TypeError('can not observe object[' + (typeof target) + ']');\n    }\n    this.target = target;\n    this.watchers = {};\n    this.listens = {};\n    this._onObserveChanged = this._onObserveChanged.bind(this);\n    this._notify = this._notify.bind(this);\n    this.changeRecords = {};\n    bindObserver(this);\n  }\n\n  _notify() {\n    _.each(this.changeRecords, (oldVal, attr) => {\n      let handlers = this.listens[attr];\n      _.each(handlers, h => {\n        let val = this.target[attr];\n        if (!_.eq(val, oldVal)) {\n          h(attr, this.target[attr], oldVal, this.target);\n        }\n      })\n    });\n    this.__request_frame = null;\n    this.changeRecords = {};\n  }\n\n  _addChangeRecord(attr, oldVal) {\n    if (!(attr in this.changeRecords)) {\n      this.changeRecords[attr] = oldVal;\n      if (!this.__request_frame) {\n        this.__request_frame = requestFrame(this._notify);\n      }\n    }\n  }\n\n  _addListen(attr, handlers) {\n    let attrHandlers = this.listens[attr];\n    if (!attrHandlers) {\n      attrHandlers = this.listens[attr] = [];\n    }\n    _.each(handlers, (h) => {\n      if (!_.include(attrHandlers, h)) {\n        attrHandlers.push(h);\n      }\n    });\n    if (attrHandlers.length) {\n      this._watch(attr);\n    }\n  }\n\n  _removeListen(attr, handlers) {\n    let attrHandlers = this.listens[attr];\n    if (attrHandlers) {\n      if (handlers.length) {\n        _.remove(attrHandlers, (h) => {\n          return _.include(handlers, h);\n        });\n      }\n      if (!handlers.length || !attrHandlers.length) {\n        delete this.listens[attr];\n        this._unwatch(attr);\n      }\n    }\n  }\n\n  _onStateChanged(attr, oldVal) {\n    if (attr in this.listens) {\n      this._addChangeRecord(attr, oldVal);\n    }\n  }\n\n  _onObserveChanged(changes) {\n    _.each(changes, change => {\n      this._onStateChanged(change.name, change.oldValue);\n    });\n  }\n\n  _defineProperty(attr, value) {\n    this.target = Object.defineProperty(this.target, attr, {\n      enumerable: true,\n      configurable: true,\n      get: function() {\n        return value;\n      },\n      set: (val) => {\n        let oldVal = value;\n        value = val;\n        this._onStateChanged(attr, oldVal);\n      }\n    });\n  }\n\n  _undefineProperty(attr, value) {\n    this.target = Object.defineProperty(this.target, this.attr, {\n      enumerable: true,\n      configurable: true,\n      value: value\n    });\n  }\n\n  _watch(attr) {\n    if (Object.observe && cfg.useES7Observe) {\n      if (!this._es7observe) {\n        Object.observe(this.target, this._onObserveChanged);\n        this._es7observe = true;\n      }\n    } else if (!this.watchers[attr]) {\n      this._defineProperty(attr, this.target[attr]);\n      this.watchers[attr] = true;\n    }\n  }\n\n  _unwatch(attr) {\n    if (Object.observe && cfg.useES7Observe) {\n      if (this._es7observe && !this.hasListen()) {\n        Object.unobserve(this.target, this._onObserveChanged);\n        this._es7observe = false;\n      }\n    } else if (this.watchers[attr]) {\n      this._undefineProperty(attr, this.target[attr]);\n      delete this.watchers[attr];\n    }\n  }\n\n  _parseBindArg(attrs, handlers) {\n    if (arguments.length == 1) {\n      handlers = attrs;\n      attrs = _.keys(this.target);\n    } else if (!_.isArray(attrs)) {\n      attrs = [attrs + ''];\n    } else {\n      attrs = _.map(attrs, attr => {\n        return attr + '';\n      });\n    }\n    if (!_.isArray(handlers)) {\n      handlers = [handlers];\n    }\n    handlers = _.filter(handlers, (h) => {\n      return _.isFunction(h);\n    });\n    return {\n      attrs: attrs,\n      handlers: handlers\n    };\n  }\n\n  hasListen() {\n    for (let attr in this.listens) {\n      return true;\n    }\n    return false;\n  }\n\n  on() {\n    let arg = this._parseBindArg.apply(this, arguments);\n    if (arg.attrs.length && arg.handlers.length) {\n      let obj = _.checkObj(this.target);\n      _.each(arg.attrs, attr => {\n        if (!(attr in obj)) {\n          obj[attr] = undefined;\n        }\n      });\n      _.each(arg.attrs, attr => {\n        this._addListen(attr, arg.handlers);\n      });\n    }\n    return this.target;\n  }\n\n  un() {\n    let arg = this._parseBindArg.apply(this, arguments);\n    if (arg.attrs.length) {\n      _.each(arg.attrs, attr => {\n        this._removeListen(attr, arg.handlers);\n      });\n    }\n    return this.target;\n  }\n\n  destory() {\n    if (Object.observe && cfg.useES7Observe) {\n      Object.unobserve(this.target, this._onObserveChanged);\n      this.listens = {};\n    } else {\n      _.each(this.watchers, (state) => {\n        state.unbind();\n      });\n      this.watchers = {};\n    }\n    unbindObserver(this);\n  }\n}\n\nfunction observe(obj) {\n  let target = _.checkObj(obj),\n    observer = getBindObserver(target),\n    ret;\n  if (!observer) {\n    observer = new Observer(target);\n  }\n  ret = observer.on.apply(observer, _.slice(arguments, 1));\n  if (!observer.hasListen()) {\n    observer.destory();\n  }\n  return ret;\n}\n\nfunction unobserve(obj) {\n  let target = _.checkObj(obj);\n  let observer = getBindObserver(target);\n  if (observer) {\n    let ret = observer.un.apply(observer, _.slice(arguments, 1));\n    if (!observer.hasListen()) {\n      observer.destory();\n    }\n    return ret;\n  }\n  return obj;\n}\n\nmodule.exports = {\n  observe: observe,\n  unobserve: unobserve,\n  cfg: cfg,\n  support: !!Object.observe || (window.supportDefinePropertyOnObject !== undefined ? window.supportDefinePropertyOnObject : (function() {\n      if (!Object.defineProperty) {\n        return false;\n      }\n      try {\n        let val;\n        object = Object.defineProperty(object, 'sentinel', {\n          get() {\n            return val;\n          },\n          set(value) {\n            val = value;\n          }\n        });\n        object.sentinel = 1;\n        return object.sentinel === val;\n      } catch (exception) {\n        return false;\n      }\n    })())\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/Users/cmp/git/observer.js/src/observer.js\n **/","let _ = require('lodash'),\n  Util = {\n    isObject(obj) {\n      return typeof obj == 'object';\n    },\n    isArray(obj) {\n      return obj && obj instanceof Array;\n    },\n    isFunction(fn) {\n      return typeof fn == 'function';\n    },\n    isString(str) {\n      return typeof str == 'string';\n    },\n    each(obj, callback) {\n      if (Util.isArray(obj)) {\n        obj.forEach(callback);\n      } else if (Util.isObject(obj)) {\n        for (let key in obj) {\n          callback(obj[key], key);\n        }\n      }\n    },\n    map(arr, callback) {\n      return arr.map(callback);\n    },\n    filter(arr, callback) {\n      return arr.filter(callback);\n    },\n    keys(obj) {\n      return Object.keys(obj);\n    },\n    include(arr, val) {\n      return arr.indexOf(val) != -1;\n    },\n    remove(arr, pred) {\n      for (let i = arr.length - 1; i >= 0; i--) {\n        if (pred(arr[i], i)) {\n          arr.splice(i, 1);\n        }\n      }\n    },\n    slice(arr, s, e) {\n      return Array.prototype.slice.call(arr, s || 0, e || arr.length);\n    },\n    //处理 VBProxy对象(IE 6,7,8)\n    checkObj(obj) {\n      if (window.VBProxy && window.VBProxy.isVBProxy(obj)) {\n        return window.VBProxy.getVBProxyDesc(obj).object;\n      }\n      return obj;\n    },\n    eq(obj, obj2) {\n      return Util.checkObj(obj) === Util.checkObj(obj2);\n    },\n    get: _.get\n  };\nmodule.exports = Util;\n\n\n\n/** WEBPACK FOOTER **\n ** C:/Users/cmp/git/observer.js/src/util.js\n **/","const _ = require('./util'),\n  observer = require('./observer'),\n  rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\n\\\\]|\\\\.)*?)\\2)\\]/g;\n\nlet _watchers = new Map();\n\n\nfunction baseToString(val) {\n  return (val === undefined || val === null) ? '' : (val + '');\n}\n\nfunction toPath(value) {\n  if (!_.isString(value)) {\n    return [];\n  }\n  var result = [];\n  baseToString(value).replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n}\n\nclass Watcher {\n  constructor(target, expression, path) {\n    if (!this.canObserve(target)) {\n      throw new TypeError('Invalid Param');\n    }\n    this.expression = expression;\n    this.handlers = [];\n    this.path = path || toPath(expression);\n    this.observers = [];\n    this._observeHandlers = this._initObserveHandlers();\n    this.target = this._observe(target, 0);\n    _watchers[this.expression] = this;\n  }\n\n  addListen(handler) {\n    if (_.isArray(handler)) {\n      _.each(handler, h => {\n        if (_.isFunction(h) && !_.include(this.handlers, h)) {\n          this.handlers.push(h);\n        }\n      });\n    } else if (_.isFunction(handler) && !_.include(this.handlers, handler)) {\n      this.handlers.push(handler);\n    }\n  }\n\n  removeListen(handler) {\n    if (_.isArray(handler)) {\n      _.remove(this.handlers, (h) => {\n        return _.include(handler, h);\n      });\n    } else if (_.isFunction(handler)) {\n      _.remove(this.handlers, handler);\n    } else if (arguments.length == 0) {\n      this.handlers = [];\n    }\n  }\n\n  hasListen() {\n    return !!this.handlers.length;\n  }\n\n  canObserve(obj) {\n    return obj && _.isObject(obj);\n  }\n\n  destory() {\n    this.target = this._unobserve(this.target, 0);\n  }\n\n  _observe(obj, idx) {\n    if (idx < this.path.length && this.canObserve(obj)) {\n      let attr = this.path[idx];\n      obj[attr] = this._observe(obj[attr], idx + 1);\n      return observer.observe(obj, attr, this._observeHandlers[idx]);\n    }\n    return obj;\n  }\n\n  _unobserve(obj, idx) {\n    if (idx < this.path.length && this.canObserve(obj)) {\n      let attr = this.path[idx], ret;\n      ret = observer.unobserve(obj, attr, this._observeHandlers[idx]);\n      ret[attr] = this._unobserve(obj[attr], idx + 1);\n      return ret;\n    }\n    return obj;\n  }\n\n  _initObserveHandlers() {\n    return _.map(this.path, (val, idx) => {\n      return this._createObserveHandler(idx)\n    });\n  }\n\n  _createObserveHandler(idx) {\n    let path = _.slice(this.path, 0, idx + 1),\n      rpath = _.slice(this.path, idx + 1),\n      ridx = this.path.length - idx - 1;\n    return (attr, val, oldVal) => {\n      if (ridx > 0) {\n        this._unobserve(oldVal, idx + 1);\n        this._observe(val, idx + 1);\n        oldVal = _.get(oldVal, rpath);\n        val = _.get(val, rpath);\n      }\n      if (val !== oldVal && this.handlers) {\n        _.each(this.handlers, (h) => {\n          h(this.expression, val, oldVal, this.target);\n        })\n      }\n    }\n  }\n}\n\n\nlet watcherLookup = new Map();\n\nfunction addWatcher(watcher) {\n  let obj = _.checkObj(watcher.target),\n    map = watcherLookup.get(obj);\n  if (!map) {\n    map = {};\n    watcherLookup.set(obj, map)\n  }\n  map[watcher.expression] = watcher;\n}\n\nfunction getWatcher(obj, expression) {\n  obj = _.checkObj(obj);\n  let map = watcherLookup.get(obj);\n  if (map) {\n    return map[expression];\n  }\n  return undefined;\n}\n\nfunction removeWatcher(watcher) {\n  let obj = _.checkObj(watcher.target),\n    map = watcherLookup.get(obj);\n  if (map) {\n    delete map[watcher.expression];\n    if (!_.findKey(map)) {\n      watcherLookup.delete(obj);\n    }\n  }\n}\n\nfunction doObserve(object, expression, handler, cascade, nonPath, signPath, multipath) {\n  if (expression && _.isArray(expression)) {\n    if (!expression.length) {\n      expression = undefined;\n    } else {\n      let ret = object;\n      _.each(expression, exp => {\n        ret = cascade(object, exp, handler);\n      });\n      return ret;\n    }\n  }\n  let path = toPath(expression);\n  if (!path.length) {\n    return nonPath(object, handler);\n  } else if (path.length == 1) {\n    return signPath(object, expression, handler);\n  } else {\n    return multipath(object, expression, handler, path);\n  }\n}\nfunction observe(object, expression, handler) {\n  if (arguments.length == 2) {\n    handler = expression;\n    expression = undefined;\n  }\n  let args = arguments;\n  return doObserve(object, expression, handler, observe, observer.observe, observer.observe, (object, expression, handler, path) => {\n    let watcher = getWatcher(object, expression) || new Watcher(object, expression, path);\n    watcher.addListen.apply(watcher, _.slice(args, 2));\n    if (!watcher.hasListen()) {\n      removeWatcher(watcher);\n      watcher.destory();\n      return object;\n    }\n    return watcher.target;\n  });\n}\nfunction unobserve(object, expression, handler) {\n  if (arguments.length == 2) {\n    handler = expression;\n    expression = undefined;\n  }\n  let args = arguments;\n  return doObserve(object, expression, handler, unobserve, observer.unobserve, observer.unobserve, (object, expression, handler, path) => {\n    let watcher = getWatcher(object, expression);\n    if (watcher) {\n      watcher.removeListen.apply(watcher, _.slice(args, 2));\n      if (!watcher.hasListen()) {\n        removeWatcher(watcher);\n        watcher.destory();\n      }\n      return watcher.target;\n    }\n    return object;\n  });\n}\n\nmodule.exports = {\n  observe: observe,\n  unobserve: unobserve\n};\n\n\n\n/** WEBPACK FOOTER **\n ** C:/Users/cmp/git/observer.js/src/watcher.js\n **/"],"sourceRoot":""}