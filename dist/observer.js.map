{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f2c92434d07d4cf560f5","webpack:///C:/Users/tao.zeng/git/observer.js/src/observer.js","webpack:///external {\"root\":\"_\",\"commonjs\":\"_\",\"commonjs2\":\"_\",\"amd\":\"_\"}"],"names":[],"mappings":"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","file":"observer.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"_\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"_\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"observer\"] = factory(require(\"_\"));\n\telse\n\t\troot[\"observer\"] = factory(root[\"_\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap f2c92434d07d4cf560f5\n **/","/**\r\n * 监控对象属性变化\r\n * 高版本浏览器(Chrome 36+, Opera 23+)基于 Object.observe(ES7)实现\r\n * 基于浏览器使用 Object.defineProperty实现\r\n * IE 6,7,8使用VBScript实现Object.defineProperty\r\n */\r\nconst _ = require('lodash'),\r\n  ARRAY_METHODS = ['push', 'pop', 'shift', 'unshift', 'sort', 'reverse', 'splice'],\r\n  prefixes = 'webkit moz ms o'.split(' '),\r\n  getFrame = function getFrame(prop, defaultVal) {\r\n    let ret = window[prop];\r\n    if (!ret) {\r\n      prop = _.capitalize(prop);\r\n      prop = _.find(prefixes, prefix => {\r\n        return window[prefix + prop];\r\n      })\r\n      ret = prop ? window[prop] : null;\r\n    }\r\n    return ret || defaultVal;\r\n  },\r\n  requestFrame = getFrame('requestAnimationFrame', function requestAnimationFrame(callback) {\r\n    let currTime = new Date().getTime(),\r\n      timeToCall = Math.max(0, 16 - (currTime - lastTime)),\r\n      reqId = setTimeout(function() {\r\n        callback(currTime + timeToCall);\r\n      }, timeToCall);\r\n    lastTime = currTime + timeToCall;\r\n    return reqId;\r\n  }).bind(window);\r\n\r\nlet _observers = new Map(),\r\n  lastTime = 0,\r\n  cfg = {\r\n    useES7Observe: true\r\n  };\r\n\r\nfunction bindObserver(observer) {\r\n  if (observer._binded !== true) {\r\n    _observers.set(observer.target, observer);\r\n    observer._binded = true;\r\n  }\r\n}\r\n\r\nfunction unbindObserver(observer) {\r\n  if (observer._binded === true) {\r\n    if (_observers.get(observer.target) === observer) {\r\n      _observers.delete(observer.target);\r\n    }\r\n    observer._binded = false;\r\n  }\r\n}\r\n\r\nfunction getBindObserver(target) {\r\n  return _observers.get(target);\r\n}\r\n\r\nclass State {\r\n  constructor(target, attr, onChange) {\r\n    this.target = target;\r\n    this.attr = attr;\r\n    this.onChange = onChange;\r\n    this.define = Object.getOwnPropertyDescriptor(target, attr) || {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: target[attr]\r\n    };\r\n  }\r\n\r\n\r\n  getValue() {\r\n    if (this.define.get) {\r\n      return this.define.get.call(this.target);\r\n    } else {\r\n      return this.define.value;\r\n    }\r\n  }\r\n\r\n  setValue(value) {\r\n    let oldValue = this.getValue();\r\n    if (value !== oldValue) {\r\n      if (this.define.set) {\r\n        this.define.set.call(this.target, value);\r\n      } else {\r\n        this.define.value = value;\r\n      }\r\n      this.onChange(this.attr, oldValue);\r\n    }\r\n  }\r\n\r\n  bind() {\r\n    if (!this._binded) {\r\n      let object = Object.defineProperty(this.target, this.attr, {\r\n        enumerable: true,\r\n        configurable: true,\r\n        get: this.getValue.bind(this),\r\n        set: this.setValue.bind(this)\r\n      });\r\n      this.target = object;\r\n      this._binded = true;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  unbind() {\r\n    if (this._binded) {\r\n      this.target = Object.defineProperty(this.target, this.attr, this.define);\r\n      this._binded = false;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  isBinded() {\r\n    return !!this._binded;\r\n  }\r\n}\r\n\r\nclass Observer {\r\n  constructor(target) {\r\n    if (!_.isArray(target) && !_.isObject(target)) {\r\n      throw TypeError('can not observe object[' + (typeof target) + ']');\r\n    }\r\n    this.target = target;\r\n    this.watchers = {};\r\n    this.listens = {};\r\n    this._onObserveChanged = this._onObserveChanged.bind(this);\r\n    this._notify = this._notify.bind(this);\r\n    this.changeRecords = {};\r\n    bindObserver(this);\r\n  }\r\n\r\n  _notify() {\r\n    _.map(this.changeRecords, (oldVal, attr) => {\r\n      let handlers = this.listens[attr];\r\n      _.each(handlers, h => {\r\n        h(attr, this.target[attr], oldVal, this.target);\r\n      })\r\n    });\r\n    this.__request_frame = null;\r\n    this.changeRecords = {};\r\n  }\r\n\r\n  _addChangeRecord(attr, oldVal) {\r\n    if (!(attr in this.changeRecords)) {\r\n      this.changeRecords[attr] = oldVal;\r\n      if (!this.__request_frame) {\r\n        this.__request_frame = requestFrame(this._notify);\r\n      }\r\n    }\r\n  }\r\n\r\n  _addListen(attr, handlers) {\r\n    let attrHandlers = this.listens[attr];\r\n    if (!attrHandlers) {\r\n      attrHandlers = this.listens[attr] = [];\r\n    }\r\n    _.each(handlers, (h) => {\r\n      if (!_.include(attrHandlers, h)) {\r\n        attrHandlers.push(h);\r\n      }\r\n    });\r\n    if (attrHandlers.length) {\r\n      this._watch(attr);\r\n    }\r\n  }\r\n\r\n  _removeListen(attr, handlers) {\r\n    let attrHandlers = this.listens[attr];\r\n    if (attrHandlers) {\r\n      if (handlers.length) {\r\n        _.remove(attrHandlers, (h) => {\r\n          return _.include(handlers, h);\r\n        });\r\n      }\r\n      if (!handlers.length || !attrHandlers.length) {\r\n        delete this.listens[attr];\r\n        this._unwatch(attr);\r\n      }\r\n    }\r\n  }\r\n\r\n  _onStateChanged(attr, oldVal) {\r\n    if (attr in this.listens) {\r\n      console.log('changed:', attr, ' ', oldVal)\r\n      this._addChangeRecord(attr, oldVal);\r\n    }\r\n  }\r\n\r\n  _onObserveChanged(changes) {\r\n    _.each(changes, change => {\r\n      this._onStateChanged(change.name, change.oldValue);\r\n    });\r\n  }\r\n\r\n  _watch(attr) {\r\n    if (Object.observe && cfg.useES7Observe) {\r\n      if (!this._es7observe) {\r\n        Object.observe(this.target, this._onObserveChanged);\r\n        this._es7observe = true;\r\n      }\r\n    } else if (!this.watchers[attr]) {\r\n      this.watchers[attr] = new State(this.target, attr, this._onStateChanged.bind(this)).bind();\r\n      this.target = this.watchers[attr].target;\r\n    }\r\n  }\r\n\r\n  _unwatch(attr) {\r\n    if (Object.observe && cfg.useES7Observe) {\r\n      if (this._es7observe && this.hasListen()) {\r\n        Object.unobserve(this.target, this._onObserveChanged);\r\n        _es7observe = false;\r\n      }\r\n    } else if (this.watchers[attr]) {\r\n      this.watchers[attr].unbind();\r\n      this.target = this.watchers[attr].target;\r\n      delete this.watchers[attr];\r\n    }\r\n  }\r\n\r\n  _parseBindArg(attrs, handlers) {\r\n    if (arguments.length == 1) {\r\n      handlers = attrs;\r\n      attrs = _.keys(this.target);\r\n    } else if (!_.isArray(attrs)) {\r\n      attrs = [attrs + ''];\r\n    } else {\r\n      attrs = _.map(attrs, attr => {\r\n        return attr + '';\r\n      });\r\n    }\r\n    if (!_.isArray(handlers)) {\r\n      handlers = [handlers];\r\n    }\r\n    handlers = _.filter(handlers, (h) => {\r\n      return _.isFunction(h);\r\n    });\r\n    return {\r\n      attrs: attrs,\r\n      handlers: handlers\r\n    };\r\n  }\r\n\r\n  hasListen() {\r\n    return _.findKey(this.listens);\r\n  }\r\n\r\n  on() {\r\n    let arg = this._parseBindArg.apply(this, arguments);\r\n    if (arg.attrs.length && arg.handlers.length) {\r\n      _.each(arg.attrs, attr => {\r\n        if (this.target.__proxy__) {\r\n          let obj = this.target.__proxy__.object;\r\n          if (!(attr in obj)) {\r\n            obj[attr] = undefined;\r\n          }\r\n        }\r\n        this._addListen(attr, arg.handlers);\r\n      });\r\n    }\r\n    return this.target;\r\n  }\r\n\r\n  un() {\r\n    let arg = this._parseBindArg.apply(this, arguments);\r\n    if (arg.attrs.length) {\r\n      _.each(arg.attrs, attr => {\r\n        this._removeListen(attr, arg.handlers);\r\n      });\r\n    }\r\n    return this.target;\r\n  }\r\n\r\n\r\n  destory() {\r\n    if (Object.observe && cfg.useES7Observe) {\r\n      Object.unobserve(this.target, this._onObserveChanged);\r\n      this.listens = {};\r\n    } else {\r\n      _.each(this.watchers, (state) => {\r\n        state.unbind();\r\n      });\r\n      this.watchers = {};\r\n    }\r\n    unbindObserver(this);\r\n  }\r\n}\r\nclass Expression {\r\n  constructor(target, expression, handler) {\r\n    this.target = target;\r\n    this.expression = expression;\r\n    this.handler = handler;\r\n    this.observers = [];\r\n  }\r\n  parsePath() {}\r\n  destory() {}\r\n}\r\nmodule.exports = {\r\n  on(obj) {\r\n    // VB Proxy\r\n    if (obj.__proxy__) {\r\n      obj = obj.__proxy__.object;\r\n    }\r\n\r\n    let observer = getBindObserver(obj);\r\n    if (!observer) {\r\n      observer = new Observer(obj);\r\n    }\r\n    let ret = observer.on.apply(observer, _.slice(arguments, 1));\r\n    if (!observer.hasListen()) {\r\n      observer.destory();\r\n    }\r\n    return ret;\r\n  },\r\n\r\n  un(obj) {\r\n    let observer = getBindObserver(obj);\r\n    if (observer) {\r\n      let ret = observer.un.apply(observer, _.slice(arguments, 1));\r\n      if (!observer.hasListen()) {\r\n        observer.destory();\r\n      }\r\n      return ret;\r\n    }\r\n  },\r\n\r\n  _getObserver(obj) {\r\n    return getBindObserver(obj);\r\n  },\r\n\r\n  cfg: cfg,\r\n\r\n  support: !!Object.observe || (window.supportDefinePropertyOnObject !== undefined ? window.supportDefinePropertyOnObject : (function() {\r\n      if (!Object.defineProperty) {\r\n        return false;\r\n      }\r\n      try {\r\n        let val;\r\n        Object.defineProperty(object, 'sentinel', {\r\n          get() {\r\n            return val;\r\n          },\r\n          set(value) {\r\n            val = value;\r\n          }\r\n        });\r\n        object.sentinel = 1;\r\n        return object.sentinel === val;\r\n      } catch (exception) {\r\n        return false;\r\n      }\r\n    })())\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/Users/tao.zeng/git/observer.js/src/observer.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"_\",\"commonjs\":\"_\",\"commonjs2\":\"_\",\"amd\":\"_\"}\n ** module id = 1\n ** module chunks = 0\n **/"],"sourceRoot":""}